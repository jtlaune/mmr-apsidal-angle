-*- mode:org -*-
hello
#+TAGS: work
#+TYP_TODO: TODO(t) WAIT(w) | DONE(d)
#+STARTUP: latexpreview
#+TITLE: Research Notes/TODOs
* capture 
* Meetings
** [2021-07-09 Fri] MEETING
1. It seems like the secular terms don't matter that much for the
   q~[0.1-1] case for comparable masses
2. For more extreme mass ratios, such as q~[0.001-0.01], dynamics may
   be more interesting
   - in this regime Te2 is an arbitrary /parameter/ because a massive
     planet's eccentricity damping will not be identical to a very
     small neighbor
   - Gap opening planet, sustained eccentricity, negative Te2?
3. If we are writing a paper, what comes next?
   - brief introduction of TP case
   - Parameter study of q~[0,1e-2], Te2 parameter, how this relates to
     apsidal alignment/equilibrium eccentricity
4. Papers mentioned:
   - Chelsea Huang Warm Jupiter Neighbors, Wasp-47 system
5. *Big picture*:
   - What happens to a smaller (<~1%) mass planet when approaching a MMR with a massive planet? 
   - How does this relate to apsidal alignment?
*** Laetitia's equilibrium plots:
[[file:ltximg/Alignment.png]]
[[file:ltximg/Alignment_weakerdamping.png]]
*** DONE [#A] Read Huang paper
*** DONE [#A] Get equilibrium solving code working you idiot
- look at extreme mass ratios
- how do secular terms change the behavior?
*** TODO [#B] Find a good parameter range for q, Te2, etc
*** TODO [#B] test parameter space with time-dependent numerical runs
- in effort to answer #5 above
** [2021-07-02 Fri] MEETING
/I think I am stupid/
1. Redo xu 2018 equations 16-18 but with the secular terms to see
   where equilibrium is, make the same plots
2. Compare numerical results of equilibrium with secular terms turned
   off to see the difference
* TODOS
** TODO [#A] list of figures and outline [2/3]
*** TODO apsidal alignment [2/3] 
  - [X] combine internal & external plots
  - [ ] plot heuristic contours from EoM
    - important term is $\cos\theta/e$
    - g-alignment 
      - ep > ed => $\theta\neq\overline{\theta}$ => $\theta$ circ => 1/e term avgs out => $\dot\gamma\to 0$
    - g-circulation
      - ep < ed => $\theta\approx\overline{\theta}$ => $\theta\to 0,\pi$ => 1/e term dominates => $\abs{\dot\gamma}> 0$
  - [X] highlight example runs with red border
*** DONE example runs
  - blurred scatter plots
  - pick 0.01,0.1 and 0.1,0.01
*** DONE phase diagrams
* WAITS
** WAIT [#B] phase diagrams [1/3]
- [X] semianalytical
- [ ] n body
- [ ] describe resonance splitting
** WAIT [#B] finish summary [2/4]
- [ ] need to include N-body runs for ext-perturber, non-confirmation or confirmation
- [X] clarify chaotic nature of e1 excitation for omext >~ dn runs
  - ep and edisk similar magnitude => chaotic based on a0
- [X] summary table of runs, cross table, # runs, etc
- [ ] relate eeq to disk properties
** WAIT [#B] test omext in H integrator 
** WAIT [#C] fix & shorten reference-pdf
** WAIT sympy confirmation of sidebyside summary EoMs
** WAIT organize [2/4]
*** DONE org research notes
*** DONE goodnotes research notes
*** TODO meeting notes
*** TODO calculation notes
** WAIT REBOUND
*** WAIT matter ring potential [0/3]
- [ ] implement force in rebound
- [ ] test implementation
- [ ] compare to semianalytical
*** WAIT add interrupt conditions  
** small todo
*** TODO [#C] fix rebound mmr Tm signs. simplify
** WAIT figure out unknown res situation to be able to include internal runs in summary
* DONES
** DONE [#A] comparable mass Hamiltonian [3/3]
*** DONE make git commit w/ test particle test suite
*** DONE clean up, organize files
*** DONE write & test comparable mass H code
* Equations pdfs
[[file:~/multi-planet-architecture/docs/4dof-pdf/4dof_diffeqs.pdf]]
** coefficients
#+BEGIN_SRC jupyter-python :session /jpy:localhost#8888:research
  sys.path.append("/home/jtlaune/multi-planet-architecture/")
  from helper import *
  alpha_0 = (j/(j+1))**(2./3.)
  f1 = -A(alpha_0, j)
  f2 = -B(alpha_0, j)
  f3 = C(alpha_0)
  f4 = D(alpha_0)
  print([f"{fi:0.2f}" for fi in [f1, f2, f3, f4]])
#+END_SRC

#+RESULTS:
: ['2.03', '-2.48', '1.15', '-2.00']

* Relevant Observed systems                                          :ATTACH:
** Huang et al. (2016)
[[file:papers/huang-2016-WJneighbors.pdf]]
:PROPERTIES:
:ID:       9ac2be99-7caa-47bf-b897-7babb34634a7
:END:
#+ATTR_ORG: :width 300
[[attachment:2021-07-14_14-34-29_screenshot.png]]
*** Kepler-30 q~0.019, q~26
Panichi et al. (2017)
[[https://arxiv.org/pdf/1707.04962.pdf]]
b,c near 2:1 first order, q~0.019
all transiting
/from exoplanet catalog:/
b 11.3 Me 0.18au 29.3 days e=0.04
c 2.01 Mj 0.3au 60.3 days e=0.01
d 23.1 Me 0.5au 143.3 days e=0.02
*** Wasp-47
b 1.1 Mj
c 1.6 Mj
d 13 Me
e 6.8 Me
*** Kepler-46
b 6 Mj
c 0.38 Mj
d 3.3 Me
*** Kepler-302
b 16 Me
c Unknown WJ
*** Kepler-419
b 2.5 Mj
c 7.3 Mj
*** Kepler-289
b 7.3 Me
c 0.42 Mj
d 4 Me
*** Kepler-418
b 1.1 Mj
*** Kepler-117
b 30 Me
c 1.8 Mj
* apsidal alignment figures
* validating w/ REBOUND [8/8]
** DONE plot gammadot components to compare
** DONE calculate ring potential
- involves elliptic integral, ```sp.special.ellipkinc'''
- research journal [2021-02-24 Wed] 
** DONE test J_2 external forcing term for perihelion precession rates
[[file:nbody/testsuite/test-omext/mup1.00e-04/om1.00e-03/e0.00e+00.png][file:~/mmr/nbody/testsuite/test-omext/mup1.00e-04/om1.00e-03/e0.00e+00.png]]
** DONE calculate external forcing term in terms of J_2
- research journal [2021-02-11 Thu]
** DONE try to use REBOUNDx to implement om_eff
- reboundx will not install on my system
** DONE investigate REBOUNDx
- implemented lots of extra forces already
- https://reboundx.readthedocs.io/en/latest/effects.html
- going to try to use a negative J_2 value with
#+BEGIN_SRC python
gh = rebx.load_force("gravitational_harmonics")
#+END_SRC python
** DONE check units on om_eff in migforce
- current results show little change in behavior, contradict
  semianalytical
- this cannot be right. I stupidly set the cartesian coordinates of
  the particle equal to the cartesian phase space coordinates:
  #+BEGIN_SOURCE python
if self.omext:
    tpart.ax += -(self.omext**2)*tpart.x
    tpart.ay += -(self.omext**2)*tpart.y
  #+END_SOURCE python
** DONE [#A] compare semianalytical ext-perturber results with REBOUND [2/2]
*** DONE run bottomright test (nonchaotic for edisk = 0.01, ep = 0.1)
finally s ecc excitation, but gammas have contradicting signs and
thetas arculating. i'm thinking its some kind of issue in signs
for om_exuld explain both)
[[file:nbestsuite/collect/precess-eq1.00e-02-ep1.00e-01-om1.00e-03.png][file:~/mmr/nbody/testsuite/collect/precess-eq1.00e-02-ep1.00e-01-om1.00e-03.png]]
[[file:exturber/varyomeff/eq1.00e-02/ep1.00e-01/1.00e-02-1.00e-03.png][file:~/mmr/ext-perturber/varyomeff/eq1.00e-02/ep1.00e-01/1.00e-02-1.00e-03.png]]
*** DONE compare gamma derivatives 
similar behavior, but the first term is circulating for nbody
[[file:ext-perturber/varyomeff/gammadots-eq1.00e-02/ep1.00e-01/4-1.00e-03.png][file:~/mmr/ext-perturber/varyomeff/gammadots-eq1.00e-02/ep1.00e-01/4-1.00e-03.png]]
[[file:nbody/testsuite/collect/precess-gammacomps-eq1.00e-02-ep1.00e-01-om1.00e-03.png][file:~/mmr/nbody/testsuite/collect/precess-gammacomps-eq1.00e-02-ep1.00e-01-om1.00e-03.png]]
* summary
** characteristics
1. chaos (only when om_ext large)
2. internal apsidal alignment
   - om_eff = 0
     * unknown res????<---- figure this out
     * kind of all over the place if im being honest. maybe don't
       include? maybe leave out just migfail runs? not sure what to do
       here
3. external apsidal alignment
   - om_eff = 0
     * gamma -> 0 
     * ep vs edisk grid 
     * EoM analytical analysis
     * plots of gamma-components
       [[file:///home/jtlaune/Dropbox/mmr/external-grid-1e-3/ext-perturber/varyomeff/gammadots-0weff/sum.pdf][summary]]
   - om_eff > 0
     * gamma -> pi
     * heuristic description of EoM
       [[file:/home/jtlaune/Dropbox/mmr/external-grid-1e-3/ext-perturber/varyomeff/sum.pdf][summary]]
     * plot e1 eq numerical value vs om_eff w/ behaviors
     * *figure* gamma component term plots (from above file bottom page 2)
     * gamma component plots
4. equilibrium eccentricity
   - no om_eff ~ disk properties
   - large enough om_eff ~ 1/gammadot from above
* results summary table 

  |--------------+-----------------+---+------------+--------------------+--------------------+--------------------|
  |              | *internal*      |   |            | *external*         |                    |                    |
  |--------------+-----------------+---+------------+--------------------+--------------------+--------------------|
  |              | om_ext = 0      |   | om_ext = 0 | om_ext < res width | om_ext ~ res width | om_ext > res width |
  |--------------+-----------------+---+------------+--------------------+--------------------+--------------------|
  | e_disk < e_p | *disaster zone* |   | *aligned*  |                    |                    |                    |
  |              |                 |   |            |                    |                    |                    |
  |--------------+-----------------+---+------------+--------------------+--------------------+--------------------|
  | e_disk ~ e_p | *aligned*       |   |            |                    |                    | *chaotic*          |
  |              |                 |   |            |                    |                    |                    |
  |              |                 |   |            |                    |                    |                    |
  |--------------+-----------------+---+------------+--------------------+--------------------+--------------------|
  | e_disk > e_p |                 |   |            |                    |                    |                    |
  |              |                 |   |            |                    |                    |                    |
  |              |                 |   |            |                    |                    |                    |
  |--------------+-----------------+---+------------+--------------------+--------------------+--------------------|

** DONE fill in om_ext columns for external
- in paper draft
** DONE think about internal? is it important to include?
yes, should include internal. explain away the bad parts by saying our
model fails


* semianalytical test cases [1/1]
[[file:test-cases.py]]
*** DONE test cases [5/5]
  - [X] inner migrating out, 4 mup stability cases (no cap, cap unstable, cap librate, cap stable)
  - [X] internal equilibrium e
  - [X] outer migrating in, 2 mup capture cases, (no cap, cap)
  - [X] external equilibrium e
  - [X] stability cases w/ ep = 0.01 small
* handwritten research journals
[[file:~/Dropbox/Apps/GoodNotes 5/GoodNotes/multi-planet-architecture/research-notes.pdf::%PDF-1.3][Feb 2020-]]
